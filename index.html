<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Қатысушыны тіркеу</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  font-family:Arial, sans-serif;
  background:#f4f6f8;
  padding:20px
}
.container{
  max-width:420px;
  background:#fff;
  padding:20px;
  margin:auto;
  border-radius:12px;
  box-shadow:0 6px 16px rgba(0,0,0,.12)
}
.logo img{
  max-width:160px;
  display:block;
  margin:0 auto 15px
}
h2{
  text-align:center;
  margin-bottom:20px
}
label{
  font-weight:bold;
  margin-top:12px;
  display:block
}
input{
  width:100%;
  padding:11px;
  margin-top:6px;
  font-size:15px;
  border-radius:6px;
  border:1px solid #ccc
}
input:focus{
  outline:none;
  border-color:#1976d2
}
button{
  display:block;
  width:100%;
  margin-top:22px;
  padding:12px;
  font-size:16px;
  background:#1976d2;
  color:#fff;
  border:none;
  border-radius:6px;
  cursor:pointer
}
button:disabled{
  background:#9bbbe5;
  cursor:not-allowed
}
.error{
  color:red;
  text-align:center;
  margin-top:10px
}
</style>
</head>

<body>
<div class="container">

  <div class="logo">
    <img src="https://github.com/cmrito2020-web/cmrito/blob/main/logoCKO.png">
  </div>

  <h2>Қатысушыны тіркеу</h2>

  <form id="form">

    <label>Аудан / Қала *</label>
    <input name="district" required>

    <label>Ұйымның атауы *</label>
    <input name="organization" required>

    <label>Толық аты-жөні *</label>
    <input name="fio" required>

    <label>Қызмет атауы *</label>
    <input name="position" required>

    <button type="submit">Жіберу</button>
  </form>

  <div id="msg"></div>

</div>

<script>
const SCRIPT_URL =
"https://script.google.com/macros/s/AKfycby-SzEGV6nJz-QheTCd-UrldJ23-eF_hsm5oQMwHHMoRxNZa1EFCtL0lMhCeWIFK8Y/exec";

const form = document.getElementById("form");
const msg = document.getElementById("msg");
const btn = form.querySelector("button");

form.onsubmit = e => {
  e.preventDefault();
  btn.disabled = true;
  btn.textContent = "Жіберілуде...";

  fetch(SCRIPT_URL,{
    method:"POST",
    body:new FormData(form)
  })
  .then(r => r.text())
  .then(t => {
    if (t === "OK") {
      window.location.href = "thanks.html";
    } else {
      msg.innerHTML = "<div class='error'>❌ Қате</div>";
      btn.disabled = false;
      btn.textContent = "Жіберу";
    }
  })
  .catch(() => {
    msg.innerHTML = "<div class='error'>❌ Байланыс қатесі</div>";
    btn.disabled = false;
    btn.textContent = "Жіберу";
  });
};
</script>

</body>
</html>
